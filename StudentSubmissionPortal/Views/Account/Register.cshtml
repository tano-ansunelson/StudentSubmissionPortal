@{
    ViewBag.Title = "Register";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
        <!-- Logo -->
        <a class="navbar-brand fw-bold d-flex align-items-center" href="@Url.Action("Index", "Home")">
            <span class="fs-3 me-2">🎓</span>
            AcademicPortal
        </a>

        <!-- Toggler -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
                aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Navbar links -->
        <div class="collapse navbar-collapse" id="navbarContent">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">
                <li class="nav-item">
                    <a class="nav-link text-white" asp-controller="Home" asp-action="Index">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" asp-controller="Home" asp-action="Privacy">Privacy</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" asp-controller="Home" asp-action="About">About Us</a>
                </li>
                <li class="nav-item ms-lg-3">
                    <a class="btn btn-outline-light d-flex align-items-center" asp-controller="Account" asp-action="Login">
                        <i class="bi bi-box-arrow-in-right me-2"></i> Login
                    </a>
                </li>
                <li class="nav-item ms-lg-2">
                    <a class="btn btn-outline-light d-flex align-items-center" asp-controller="Account" asp-action="Register">
                        <i class="bi bi-person-plus me-2"></i> Register
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- REGISTRATION PAGE -->
<div class="min-vh-100 d-flex flex-column flex-md-row bg-dark pt-5">

    <!-- LEFT SIDE FORM -->
    <div class="flex-fill d-flex align-items-center justify-content-center p-4">
        <div class="card shadow-lg p-4 rounded-4"
             style="max-width: 480px; width: 100%; background: #1e1f24; border: none;">

            <div class="text-center mb-4 text-white">
                <h2 class="fw-bold">Create Your Account</h2>
                <p class="text-secondary">Join Project Hub and start managing your projects easily.</p>
            </div>

            <form method="post" novalidate>

                <!-- Full Name -->
                <div class="mb-3">
                    <label for="FullName" class="form-label text-white-50">Full Name</label>
                    <input type="text"
                           id="FullName"
                           name="FullName"
                           class="form-control bg-dark text-white border-secondary"
                           placeholder="John Doe"
                           required />
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <label for="Email" class="form-label text-white-50">Email</label>
                    <input type="email"
                           id="Email"
                           name="Email"
                           class="form-control bg-dark text-white border-secondary"
                           placeholder="me@example.com"
                           required />
                </div>

                <!-- Password -->
                <div class="mb-3">
                    <label for="Password" class="form-label text-white-50">Password</label>
                    <input type="password"
                           id="Password"
                           name="Password"
                           class="form-control bg-dark text-white border-secondary"
                           placeholder="Enter password"
                           required />
                </div>

                <!-- Role -->
                <div class="mb-3">
                    <label for="Role" class="form-label text-white-50">Role</label>
                    <select id="Role"
                            name="Role"
                            class="form-select bg-dark text-white border-secondary"
                            required
                            onchange="toggleClassSelector()">
                        <option value="" disabled selected>Select your role</option>
                        <option value="Student">Student</option>
                        <option value="Supervisor">Supervisor</option>
                    </select>
                </div>

                <!-- Class (typing + selecting) -->
                <div class="mb-3" id="classSelector" style="display:none;">
                    <label for="ClassIdInput" class="form-label text-white-50">Class</label>
                    <input id="ClassIdInput"
                           name="ClassId"
                           class="form-control bg-dark text-white border-secondary"
                           list="ClassList"
                           placeholder="Type or choose class (e.g. Form 1)"
                           autocomplete="off">
                    <datalist id="ClassList">
                        <option value="Form 1"></option>
                        <option value="Form 2"></option>
                        <option value="Form 3"></option>
                        <option value="Form 4"></option>
                        <option value="Form 5"></option>
                    </datalist>
                </div>

                <!-- Submit -->
                <div class="d-grid mt-3">
                    <button type="submit" class="btn btn-success py-2 fw-semibold">Create Account</button>
                </div>
            </form>

            <div class="text-center mt-4">
                <span class="text-white-50">Already registered?</span>
                <a asp-controller="Account" asp-action="Login" class="btn btn-link text-success fw-semibold text-decoration-none">Login</a>
            </div>
        </div>
    </div>

    <!-- RIGHT SIDE IMAGE PANEL -->
    <div class="flex-fill d-none d-md-block">
        <img src="images/cappp.jpg"
             class="w-100 h-100"
             style="object-fit: cover; object-position: center; filter: brightness(88%);"
             alt="Registration Image">
    </div>
</div>

<script>
    function toggleClassSelector() {
      const roleEl = document.getElementById('Role');
      const classSection = document.getElementById('classSelector');
      const role = roleEl ? roleEl.value : '';
      classSection.style.display = (role === 'Student') ? 'block' : 'none';
    }

    document.addEventListener('DOMContentLoaded', function () {
      toggleClassSelector();
    });
</script>
